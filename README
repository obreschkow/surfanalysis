OVERVIEW
====================================================================================================================

SurfAnalysis is an extension to SurfSuite, providing additional tasks to analyse N-body simulation data.
As SurfSuite, SurfAnalysis has been mainly written to analyse data from the SURFS simulations at ICRAR/UWA.
This README file only describes the additional tasks of SurfAnalysis. For all other purposes, please refer
to the README file of SurfSuite.

V0.10 25/02/2020: First release
V0.20 28/06/2021: Added asymmetry parameter (for Jie Li's PhD)
V0.24 09/11/2021: Small correction to asymmetry parameter calculation

Copyright Danail Obreschkow (danail.obreschkow@icrar.org)


QUICK START ON ICRAR-HYADES
====================================================================================================================

# install and compile surfsuite in your home directory
cd ~
rm -rf surfanalysis/ # remove previous surfanalysis directory
git clone https://github.com/obreschkow/surfanalysis # install updated version
cd surfanalysis # change to surfsuite directory
module load gfortran hdf5 # load required modules
make system=hyades # compile code
./surfanalysis version # check version


TASKS
====================================================================================================================

To use SurfAnalysis, it is essential that data particle and halo data has already been pre-processed by
SurfSuite. SurfAnalysis will display error messages if certain data are not available.

The outputs generated by SurfAnalysis are written into a directory specified by the parameter "path_analysis" in
the parameter file (see SurfSuite documentation).


Generally, SurfAnalysis is called as
> ./surfanalysis task [task_argument] [-option argument] [-option argument] ...

The tasks to choose from are

+ moments: computes the moment indices of the spherical harmonics analysis
  -subhalos (default 1): 0 = do not include particles in subhalos, 1 = include particles in all generations of subhalos
  
+ asymmetries: computes the asymmetry parameters and various related quantities
  -subhalos (default 1): 0 = do not include particles in subhalos, 1 = include particles in all generations of subhalos
  -initial: index of initial snapshot, at which the asymmetry parameters are evaluated for the haloes at
   snapshot, specified by -snapshot.
  -massmin (default 1e12): minimum halo mass in simulation units (typically Msun/h).
  
  
Optional arguments used by all routines (same as in SurfSuite)

-parameterfile (default parameters.txt): path+filename of parameter-file

-parameterset: if this option is specified, e.g. "-parameterset abc", the parameters listed in this parameterset, e.g. between
 the lines "parameterset abc" and "end" overwrite the default parameters specified outside the parameterset. The user can mark at
 most one parameterset in the parameterfile as the default parameterset using an asterix: "parameterset* abc". This parameterset
 is taken as the default, if the option "-parameterset" is not provided. If no parameterset is marked as default and if no
 parameterset is selected via "-parameterset", all parameters in parametersets are ignored.

-snapshot (default set in parameter-file): overwrites the 'snapshot' number given in parameters.txt to allow
 a quick access to a different snapshot, keeping all the other parameters identical.

-logfile (default none) optional filename of an ascii-file for the screen output

-verbose (default n if logfile given, otherwise y): logical flag (y or n) specifying whether the log should be
 displayed on the screen
